<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jobs Posted</title>

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", sans-serif;
        background: #f5f7fb;
        overflow-x: hidden; /* FIX horizontal scroll */
      }

      /* NAVBAR */
      nav {
        width: 100%;
        background: #e5f0ff;
        padding: 14px 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        border-bottom: 1px solid #c4dbff;
        position: sticky;
        top: 0;
        z-index: 999;
      }

      .logo {
        font-size: 22px;
        font-weight: bold;
        color: #003b8e;
      }

      .nav-links {
        display: flex;
        align-items: center;
        gap: 30px;
      }

      .nav-links a {
        text-decoration: none;
        color: #003b8e;
        font-size: 16px;
        font-weight: 500;
      }

      .nav-links a:hover {
        color: #0057c2;
      }

      /* SEARCH */
      .search-form {
        display: flex;
        align-items: center;
        background: white;
        border: 1px solid #a8c8ff;
        border-radius: 6px;
        padding: 2px;
      }

      .search-form input {
        padding: 6px 10px;
        border: none;
        outline: none;
        background: none;
        width: 160px;
        font-size: 14px;
      }

      .search-btn {
        background: #c4dbff;
        border: none;
        padding: 6px 10px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
      }

      .logout-btn {
        padding: 7px 14px;
        border-radius: 6px;
        background: #0057c2;
        color: white !important;
        font-size: 15px;
        text-decoration: none;
      }

      .menu-btn {
        display: none;
        font-size: 32px;
        cursor: pointer;
        color: #003b8e;
      }

      /* RESPONSIVE */
      @media (max-width: 768px) {
        .nav-links {
          display: none;
          flex-direction: column;
          gap: 20px;
          background: #e5f0ff;
          width: 100%;
          padding: 20px 0;
          text-align: center;
          position: absolute;
          top: 65px;
          left: 0;
          border-bottom: 1px solid #c4dbff;
        }

        .nav-links.show {
          display: flex;
        }

        .menu-btn {
          display: block;
        }

        .search-form input {
          width: 100%;
        }
      }

      /* PAGE TITLE */
      .top-bar {
        display: flex;
        justify-content: center;
        margin: 25px 0;
      }

      .top-bar h2 {
        font-size: 26px;
        color: #1a1c2c;
      }

      /* FEEDBACK MESSAGE */
      #feedback {
        width: 60%;
        margin: 20px auto;
        padding: 12px 18px;
        text-align: center;
        background: #ffe5e5;
        color: #d40000;
        font-weight: bold;
        border-radius: 8px;
        border: 1px solid #ffb3b3;
        opacity: 0;
        transform: translateY(-10px);
        transition: opacity 0.6s ease, transform 0.6s ease;
      }

      #feedback.show {
        opacity: 1;
        transform: translateY(0);
      }

      /* GRID */
      .job-grid {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 20px;
        padding: 10px;
      }

      .job-card {
        width: 330px;
        background: white;
        padding: 20px;
        border-radius: 14px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        text-align: center;
        transition: 0.3s;
      }

      .company-icon {
        width: 55px;
        height: 55px;
        background: #2563eb;
        border-radius: 12px;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-size: 26px;
        margin: 0 auto 12px;
      }

      .job-title {
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 12px;
      }

      .btn-group {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-top: 15px;
      }

      .btn {
        padding: 8px 12px;
        border-radius: 8px;
        color: white;
        border: none;
        cursor: pointer;
      }

      .edit {
        background: #f59e0b;
      }

      .delete {
        background: #ef4444;
      }

      .view {
        background: #3b82f6;
      }
    </style>
  </head>

  <body>
    <!-- NAVBAR -->
    <nav>
      <div class="logo">Job Portal</div>

      <div class="menu-btn" onclick="toggleMenu()">‚ò∞</div>

      <div class="nav-links" id="menu">
        <a th:href="@{/Admin/getall}">Jobs Posted</a>
        <a th:href="@{/Admin/addForm}">Add Job</a>
        <a th:href="@{/Admin/portal-queries}">Portal Queries</a>

        <form th:action="@{/Admin/Adminsearch}" method="get" class="search-form">
          <input type="text" name="searchKey" placeholder="Search jobs..." />
          <button type="submit" class="search-btn">üîç</button>
        </form>

        <a th:href="@{/logout}" class="logout-btn">Logout</a>
      </div>
    </nav>

    <div class="top-bar">
      <h2>Jobs Posted</h2>
    </div>

    <div id="feedback" th:text="${ApplicationsCheck}"></div>

    <!-- GRID -->
    <div class="job-grid" th:if="${alljobs.size() > 0}">
      <div class="job-card" th:each="job : ${alljobs}">
        <div class="company-icon" th:text="${job.Company.substring(0,1)}"></div>

        <div class="job-title" style="font-style:italic;" th:text="${job.Company}"></div>
        <div class="job-title" th:text="${job.Title}"></div>

        <p><b>Code:</b> <span th:text="${job.Code}"></span></p>
        <p><b>Description:</b> <span th:text="${job.Description}"></span></p>
        <p><b>Requirements:</b> <span th:text="${job.Requirements}"></span></p>
        <p><b>Employment:</b> <span th:text="${job.EmployementType}"></span></p>
        <p><b>Experience:</b> <span th:text="${job.ExperienceLevel}"></span></p>
         <p><b>Work Type:</b> <span th:text="${job.workType}"></span></p>
        <p><b>Package:</b> <span th:text="${job.Package}"></span></p>
        <p><b>Location:</b> <span th:text="${job.Location}"></span></p>

        <div class="btn-group">
          <button class="btn edit">
            <a th:href="@{/Admin/editForm(id=${job.id})}" style="color: white;text-decoration:none;">Edit</a>
          </button>

          <button class="btn delete">
            <a th:href="@{/Admin/delete(id=${job.id})}" style="color: white;text-decoration:none;">Delete</a>
          </button>

          <button class="btn view">
            <a
              th:href="@{/Admin/allApplications(id=${job.id})}"
              style="color: white;text-decoration:none;"
              >Applicants</a
            >
          </button>
        </div>
      </div>
    </div>

    <script>
      function toggleMenu() {
        document.getElementById("menu").classList.toggle("show");
      }

      window.addEventListener("DOMContentLoaded", function () {
        const fb = document.getElementById("feedback");
        if (fb && fb.innerText.trim() !== "") {
          fb.classList.add("show");

          setTimeout(() => {
            fb.style.opacity = "0";
          }, 3000);
        }
      });
    </script>
  </body>
</html>
